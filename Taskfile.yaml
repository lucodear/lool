# https://taskfile.dev

version: '3'

tasks:
  run:watch:
    desc: ğŸš€ watch lool
    cmds:
      - cargo watch -c -x "run -- --version"

  build:watch:
    desc: ğŸš€ watch lool Â«buildÂ»
    cmds:
      - cargo watch -c -x "build"

  build:
    desc: âš¡ build lool Â«releaseÂ»
    cmds:
      - cargo build --release
      - python check_size.py

  example:logger:
    desc: ğŸš€ run lool Â«example loggerÂ»
    cmds:
      - cargo run --example=logger --release --features logger
  
  example:threadpool:
    desc: ğŸš€ run lool Â«example threadpoolÂ»
    cmds:
      - cargo run --example=threadpool --release --features utils.threads

  fmt:
    desc: ğŸ¨ format lool
    cmds:
      - cargo +nightly fmt --all

  lint:
    desc: ğŸ§¶ lint lool
    cmds:
      - cargo clippy --fix --all-features --allow-staged

  test:
    desc: ğŸ§ª test lool
    cmds:
      - cargo nextest run --all-features

  publish:
    desc: ğŸš€ publish lool
    cmds:
      - cargo publish --registry lugit
